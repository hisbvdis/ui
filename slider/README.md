# Range

## Принцип реализации
**CSS**
1. Пину задать относительное позиционирование
   - его положение будет определяться заданием смещения слева

**JavaScript**
1. Найти DOM-элементы полосы и пина
2. Для пина добавить обработчик зажатия "mousedown"
   - Когда происходит зажатие, предотвратить стандартное поведение браузера (выделение элементов)
   - Вызвать функцию подготовки к перемещению пина
   - Добавить для `document` обработчики событий движения мышью `mousemove` и поднятия ЛКМ `mouseup`
   - Для пина добавить обработчик события `dragstart`, который будет предотвращать стандартное поведение браузера, запускающееся при перемещении &lt;img&gt; и некоторых других элементов
3. Функция подготовки к перемещению пина `prepareForMoving()`
   - Добавить глобальную переменную `pinClickX`, в которой будет храниться расстояние от левого края пина до места клика на пин
   - Вычислить и сохранить это расстояние
   - Вычислить и сохранить в глобальную переменную максимально допустимое положение пина на полосе
   - Вызвать функцию перемещения пина к курсору
4. Функция перемещения пина к курсору `movePinTo()` (будет вызываться при клике и при каждом срабатывании события движения мышью)
   - Вычислить координату, к которой нужно переместить пин (на основании координат клика, расстояния от края пина до точки клика на пин и координаты левого края полосы)
   - Проверить, находится ли курсор за пределами левого и правого края полосы. Если да, задать пину минимальное/максимальное положение на полосе
   - Перемещение пина путём задания смещения слева через стили
5. При каждом смещении курсора мыши, перемещать пин к курсору (в обработчике события `mousemove` вызывать функцию `movePinTo()`)
6. В обработчике `mouseup` удалять обработчики, созданные при нажатии ЛКМ (событии `mousedown`)
7. Для полосы диапазона добавить обработчик события `mousedown`, который:
   - перемещает пин к курсору, вызывая функцию `movePinTo()`
   - вызывает обработчик нажатия ЛКМ на пин `pin_Mousedown_Handler()`


## Адаптация кода базового примера "Drag and Drop" для слайдера
1. Дополнительный обработчик для нажатия на Dragarea
2. Искать элементы "Drago" и "Dragarea" лучше в обработчиках, так как отличается способ
3. Из обработчиков передавать аргумент с указанием, на какой элемент было нажатие: Drago или Dragarea
4. При вычислении координат назначения, отнимать координаты начала области перетаскивания, так как в CSS для Drago задаются координаты относительно области
5. В функции, которая непосредственно перемещает Drago в нужную координату, задавать коодинату только одной нужной оси (x или y)
6. Добавить переменную "filler" (заполнитель) и функцию изменения его ширины


## Источники (литература)
- [x] [Learn.JavaScript.ru - Drag'n'Drop с событиями мыши](https://learn.javascript.ru/mouse-drag-and-drop)
- [x] [Библиотека noUiSlider](https://refreshless.com/nouislider/)
- [ ] Стилизуем слайдер input range для всех популярных браузеров [ссылка1](https://habr.com/ru/post/567058/), [ссылка2](https://toughengineer.github.io/demo/slider-styler/slider-styler.html)