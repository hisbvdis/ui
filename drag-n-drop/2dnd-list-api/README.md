# Drag-n-Drop: Элементы списка (с помощью Drag and Drop API)

## Перетаскиваемые элементы
**Атрибут `draggable`
- Делает элемент доступным для перетаскивания
- Для ссылок, изображений и выделенного текста данный атрибут не нужен - эти элементы доступны для перетаскивания по умолчанию
- Пример: `draggable="true"`, `draggable="false"`

**Атрибут `data-valid-dropzone`
- Содержит идентификатор "зон сброса", в которые можно сбрасывать данный элемент
- Пример: `data-valid-dropzone="dropzone"`

**Атрибут `data-drag-group`
- Подобно атрибуту `name` у радио-кнопкок, логически объединяет перетаскиваемые элементы в группу
- Пример: `data-drag-group="list"`


## Зона сброса
**Атрибут `data-dropzone`
- Задаёт идентификатор элемента, являющегося "зоной сброса"
- Пример: `data-dropzone="dropzone"`


## JS-файл
### Этап 0 - Ожидание перемещения
**1. Обработчик**
- Добавить обработчик, который будет отслеживать событие начала перетаскивания Drago (`dragstart`) и запускать функцию с действиями по подготовке


### Этап 1 - Начало перемещения
**1. Глобальные переменные**
- Определить сам перетаскиваемый элемент - из события
- Название группы перетаскиваемых элементов - из атрибута перетаскиваемого элемента
- Название допустимых "зон сброса" - из атрибута перетаскиваемого элемента

**2. Поготовить Drago**
- Стилизовать перетаскиваемый элемент на время перетаскивания

**3. Обработчики**
- Добавить обработчики событий `dragover` и `drop` для элементов, являющихся "зоной сброса"
- Добавить обработчик событий `drop` для перетаскиваемого элемента


### Этап 2 - Перемещение
**1. Обработчик**
- Обработчик события `drag` должен срабатывать только, если:
  - указатель находится над допустимой "зоной сброса"
  - указатель НЕ находится над самим перетаскиваемым элементом
  - указатель находится над другим элементом из той же группы перетаскиваемых элементов

**2. Элемент под Drago**
- Определить элемент, который находится под указателем при перетаскивании элемента
- Вычислить центр этого элемента по оси Y

**3. Переместить Drago**
- На основании положения курсора относительно центра элемента под указателем, переместить Drago перед или после него


### Этап 3 - Завершение перемещения
**1. Стилизация Drago**
- Удалить стилизацию перемещаемого элемента

**2. Обработчики**
- Удалить ранее созданные обработчики

**3. Глобальные переменные**
- Обнулить глобальные переменные, чтобы не было конфликтов


## Источники (литература)
- [x] HTMLAcademy | Как реализовать drag&amp;drop на чистом JavaScript ([ссылка](https://habr.com/ru/company/htmlacademy/blog/541972/))